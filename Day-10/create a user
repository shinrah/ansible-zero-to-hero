---
- hosts: localhost
  become: yes
  tasks:
   - block:
     - name: create a user
       user:
         name: devloper
         state: present
         shell: /bin/bash
         create_home: yes
         password: "{{ 'mcsa@123' | password_hash('sha512') }}"
         comment: "Devloper user account"
     rescue:
      - name: create user if not created
        user: 
          name: devloper
          state: present
          shell: /bin/bash
          create_home: yes
          password: "{{ 'mcsa@123' | password_hash('sha512') }}"
          comment: "Devloper user account"
     always:
      - name: ensure user is created
        debug:
          msg: "user creation task completed"
